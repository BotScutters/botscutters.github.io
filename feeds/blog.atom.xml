<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Bits 'n' Bots - blog</title><link href="/" rel="alternate"></link><link href="/feeds/blog.atom.xml" rel="self"></link><id>/</id><updated>2019-04-21T12:10:00-07:00</updated><entry><title>Mary Jane, the Model</title><link href="/articles/2019/04/20/mary-jane-model/" rel="alternate"></link><published>2019-04-20T14:15:00-07:00</published><updated>2019-04-21T12:10:00-07:00</updated><author><name>Scott Butters</name></author><id>tag:None,2019-04-20:/articles/2019/04/20/mary-jane-model/</id><summary type="html">&lt;p&gt;In 2012, Washington state passed I-502 and legalized the recreational sale, use, and possession of marijuana. This event has led to an explosion of development in the field that's making waves through our society. Since 2014, approximately 500 state licensed dispensaries have opened throughout the state, with nearly 150 of those here in Seattle. In this project I scour the web for publicly available data that might be predictive of how a cannabis dispensary performs, such as customer reviews, inventory distributions, and local demographics. I then train machine learning models to predict a dispensary's monthly revenue and analyze the resulting models to distill insights about what drives sales in the marijuana market.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Marijuana is a controversial subject, to be sure. That said, as Washington state and others have legalized recreational pot over the past handful of years the industry has gone from being confined to the shadows to operating on full display in showrooms reminiscent of Apple stores and luxury car dealerships. &lt;/p&gt;
&lt;p&gt;&lt;img src="/img/budtender-1024x640.jpg" alt="me"/&gt;&lt;/p&gt;
&lt;p&gt;For the last two weeks, I've been immersed in a cloud of data surrounding the Washington marijuana industry, attempting to model the relationship between factors like online reviews and local demographics and a dispensary's reported revenue. While it's been a bit hazy at times, it's ultimately led to some enlightening insights. I'd love to share with you some of what I've learned while dabbling with Mary Jane, the model. &lt;/p&gt;
&lt;h2&gt;Abstract&lt;/h2&gt;
&lt;p&gt;In 2012, Washington state passed I-502 and legalized the recreational sale, use, and possession of marijuana. This has led to  an explosion of development in the field that's making waves through our society. Since 2014, approximately 500 state licensed dispensaries have opened throughout the state, with nearly 150 of those here in Seattle. In this project, I scoured the web for publicly available data that might be predictive of how a cannabis dispensary performs, such as customer reviews, inventory distributions, and local demographics. I then trained machine learning models to predict a dispensary's monthly revenue and analyze the resulting models to distill insights about what drives sales in the marijuana market. For the full source code from my project, check out &lt;a href="https://github.com/BotScutters/dispensary-predictions"&gt;my GitHub&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Tools&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Code&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Python&lt;/li&gt;
&lt;li&gt;Jupyter notebook&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Data exploration and cleaning&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Numpy&lt;/li&gt;
&lt;li&gt;Pandas&lt;/li&gt;
&lt;li&gt;Fuzzywuzzy&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Modeling&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Sklearn&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Visualization&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Matplotlib&lt;/li&gt;
&lt;li&gt;Seaborn&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Web scraping&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Requests&lt;/li&gt;
&lt;li&gt;Selenium&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Workflow management&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DataScienceMVP&lt;/li&gt;
&lt;li&gt;Cookiecutter&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Data Sources&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Washington State Liquor and Cannabis Board (WSLCB)&lt;/li&gt;
&lt;li&gt;Leafly&lt;/li&gt;
&lt;li&gt;WA HomeTownLocator&lt;/li&gt;
&lt;li&gt;Walkscore&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Licensing and Sales Data from &lt;a href="https://lcb.wa.gov/"&gt;WSLCB&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Lastly, all that data would get us nowhere if we didn't have any target data to train our models on. That's where the WSLCB comes in. The WSLCB maintains data on every dispensary in the state, including monthly reports of revenue (which is what our model is predicting). Their data is scattered across a couple of different outlets, but for this project I used spreadsheets downloadable from &lt;a href="https://lcb.wa.gov/records/frequently-requested-lists"&gt;this obsure page&lt;/a&gt; to get sales data dating back to November 2017. Because the only identifying information in that spreadsheet is the license number of the dispensary, I also downloaded a spreadsheet listing metadata for every entity that has applied for a Marijuana license, which I then joined with the sales data in order to link it up with data scraped from other resources.&lt;/p&gt;
&lt;h3&gt;Dispensary profiles from &lt;a href="www.leafly.com"&gt;Leafly&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Leafly is an information aggregator for cannabis. They maintain a profile for most of the dispensaries in the state. As part of my dataset, I've scraped the following features from the Leafly website for each dispensary for which it was available:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Average customer rating and number of customer reviews&lt;/li&gt;
&lt;li&gt;Inventory counts (number of products under descriptions like "flower", "edibles", "concentrates", etc.&lt;/li&gt;
&lt;li&gt;Categorical qualities, such as whether or not the store is ADA accessible or has an ATM onsite&lt;/li&gt;
&lt;li&gt;Metadata such as name, address, phone number, etc.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The combination of these features gives us a profile of each dispensary that allow us to draw insights from our model into what makes for a successful dispensary.&lt;/p&gt;
&lt;h3&gt;Demographics from &lt;a href="https://washington.hometownlocator.com/"&gt;WA HomeTownLocator&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Of course, having the best inventory, friendliest staff and prettiest pot shop in the state doesn't amount to anything if a dispensary is in the middle of nowhere. This is where demographic data comes in. WA HomeTownLocator maintains a database of demographic statistics for nearly every zip code in the state of Washington. The data is produced by Esri Demographics, and updated 4 times per year using data from the federal census, IRS, USPS, as well as local data sources and more. From this website I scraped data likely to be predictive of a local market such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Population density&lt;/li&gt;
&lt;li&gt;Diversity&lt;/li&gt;
&lt;li&gt;Average income&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These data give our model an image of what a dispensary's customer base is like, allowing us to characterize what makes for a good location to establish a dispensary.&lt;/p&gt;
&lt;h3&gt;&lt;a href="www.walkscore.com"&gt;Walkscore&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;I also used the Walkscore API to query their database for scores on how easily consumers can reach each dispensary by foot or bike.&lt;/p&gt;
&lt;h2&gt;Obtaining the Data&lt;/h2&gt;
&lt;h3&gt;Scraping Leafly&lt;/h3&gt;
&lt;h3&gt;Scraping demographic data&lt;/h3&gt;
&lt;h2&gt;Cleaning, Combining, and Developing the Data&lt;/h2&gt;
&lt;h3&gt;Merging data without a common key&lt;/h3&gt;
&lt;h3&gt;Determining dispensary density&lt;/h3&gt;
&lt;h2&gt;Explore, Engineer, and Iterate&lt;/h2&gt;
&lt;h3&gt;Heatmap of correlations&lt;/h3&gt;
&lt;h3&gt;Regression plots of each feature with target variable&lt;/h3&gt;
&lt;h2&gt;Building and Refining a Model&lt;/h2&gt;
&lt;h3&gt;Building an MVP (Minimum Viable Product) with multivariate linear regression&lt;/h3&gt;
&lt;h3&gt;Optimizing our model and feature selection with feature scaling and regularization through lasso regression&lt;/h3&gt;
&lt;h2&gt;So What Insights Can We Glean?&lt;/h2&gt;
&lt;h3&gt;Descaling and translating our coefficients into terms we can understand&lt;/h3&gt;
&lt;h2&gt;Future Work&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Collect more data&lt;/li&gt;
&lt;li&gt;More extensive exploratory data analysis&lt;/li&gt;
&lt;li&gt;Time series projections&lt;/li&gt;
&lt;li&gt;Look at revenue &lt;em&gt;growth&lt;/em&gt; as a target variable&lt;/li&gt;
&lt;li&gt;Experiment with different models&lt;/li&gt;
&lt;li&gt;Suggest optimal locations and product lines&lt;/li&gt;
&lt;/ul&gt;</content><category term="python"></category><category term="data science"></category><category term="web scraping"></category><category term="leafly"></category><category term="marijuana"></category><category term="washington"></category></entry><entry><title>Welcome to Bits 'n' Bots!</title><link href="/articles/2019/04/20/my-first-blog-post/" rel="alternate"></link><published>2019-04-20T12:38:00-07:00</published><updated>2019-04-20T12:57:00-07:00</updated><author><name>Scott Butters</name></author><id>tag:None,2019-04-20:/articles/2019/04/20/my-first-blog-post/</id><summary type="html">&lt;p&gt;Introduction to what the bits 'n' bots blog is about&lt;/p&gt;</summary><content type="html">&lt;h1&gt;Bits 'n' Bots: Alive?&lt;/h1&gt;
&lt;p&gt;Welcome to Bits 'n' Bots, the up and coming repo of my thoughts, musings, projects and passions. Here we'll find a incomplete catalog of the off-the-wall topics I obsess over and explore. This blog will be generally data centric and analytical, a site to host and discuss my data science explorations, but from time to time I expect I'll also venture into topics such as futurist ethics, robotics, and really just about anything related to the impending singularity. Thanks for reading and feel free to reach out if any of my work catches your interest!&lt;/p&gt;</content><category term="python"></category><category term="data science"></category><category term="robots"></category><category term="AI"></category><category term="the singularity"></category></entry></feed>